---
  aws::test_mode: true
  aws::access_key: 'AKIAJNZXT7ANR3SEHETQ'
  aws::region: 'us-east-1'
  aws::az: 'us-east-1d'
  aws::subnet: 'rpid_subnet'
  aws::securitygroup: 'open'
  aws::ips:
  aws::resources:
    'ec2_vpc':
      'rpid_vpc':
        ensure: present
        region: "%{hiera('aws::region')}"
        cidr_block: '10.0.0.0/16'
    'ec2_vpc_subnet':
      'rpid_subnet':
        ensure: present
        region: "%{hiera('aws::region')}"
        cidr_block: '10.201.0.0/24'
        availability_zone: "%{hiera('aws::az')}"
    'ec2_securitygroup':
      'open':
        description: 'Open (uses server-level firewall)'
        region: "%{hiera('aws::region')}"
        vpc: 'rpid_vpc'
        ingress:
          - protocol: '-1'
            from_port: 1
            to_port: 65535
            cidr: '0.0.0.0/0'
    'ec2_instance':
      'monitor':
        ensure: 'absent'
        region: "%{hiera('aws::region')}"
        subnet: "%{hiera('aws::subnet')}"
        security_groups: "%{hiera('aws::securitygroup')}"
        image_id: 'ami-e8651cfe'
        instance_type: 't2.micro'
        associate_public_ip_address: true
        key_name: 'rpidkey'
        block_devices:
          - device_name: '/dev/sda1'
            volume_size: 8
